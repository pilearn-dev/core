{% from "makros.html" import user_card, forum_close_dialog %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="vSvlVOqzIXqIPAJHn1n2sHTbfLF-7TipRxK_T4jokls" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>&pi;-Learn &ndash; {{ title|safe }}</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link rel="stylesheet" href="/static/new_css/framework.css">
  <link rel="stylesheet" href="/static/fa/css/font-awesome.min.css">
</head>
<body class="loading">
  <header class="_header _header-sm _header-bordered p-st">
    <div class="single-fluid d-f _header-container">
      <nav class="_header-items hide__lg">
        <a class="_header-icon" href="#!">☰</a>
      </nav>
      <a class="_header-brand pl2 pr2" href="#!"><img src="/static/img/logo_pi-learn.svg"><span class="hide__sm">&pi;-Learn</span></a>
      <div class="_header-spacer"></div>
      <nav class="_header-items">
        {% if user.isMod() %}
        <a href="/tools" class="_header-icon hide__sm" title="Werkzeuge -- Besondere Funktionen und Bemerkenswerte Beiträge -- Nur für Administratoren und Moderatoren"><span class="fs-base3">⬧</span></a></li>
        {% endif %}
        {% if user.may("forum_reviewEdits") or user.may("course_reviewEdits") %}{% set revC = review.getReviewCountState(user) %}
        <a href="/review" class="_header-icon hide__md hide__sm" title="Moderation -- Überprüfe Beiträge auf dieser Seite und entscheide, wie mit diesen weiter zu verfahren ist."><span class="fs-base3"><i class="fa fa-filter"></i></span></a>
        {% endif %}

        <a class="_header-icon hide__md hide__sm" title="Hilfe -- Zugang zu Hilfezentrum, Code of Conduct, Datenschutz, Impressum und Tour" href="/help"><span class="fs-base3"><i class="fa fa-question-circle-o"></i></span></a>
        {% if user.isLoggedIn() %}

          <a href="/u/{{ user.id }}" title="Eigenes Benutzerprofil" class="_header-mix">{% if user.getDetail("profile_image") %}
          <img src="{{ user.getDetail("profile_image") }}" class="_header-img mr2__lg mr0" aria-hidden="true">
          {% else %}
          <i class="fa fa-user fa-fw fs-heading" aria-hidden="true"></i>
          {% endif %}<span class="_badge _badge-score hide__md hide__sm">{{ user.getReputation() }}</span></a>

          {% set notificationCount = g.countNotifications(user_messages) %}
          <a class="_header-icon p-r" id="notification-trigger" href="#!" title="Posteingang: Du hast {% if notificationCount == 0 %}keine{% elif notificationCount == 1 %}eine{% else %}{{ notificationCount }}{%endif%} neue Nachrichten">{% if notificationCount != 0 %}<span class="_badge _badge-s-danger p-a">{{ notificationCount }}</span>{% endif %}<span class="fs-base2 pt1"><svg width="1.5em" height="1.5em" viewbox="3 3 45 45">
            <path d="M6,11 h36 v24 h-36 z" fill="transparent" stroke-width="4" />
            <path d="M6,35 h36" fill="transparent" stroke-width="8" />
            <path d="M6,11 l18,12 l18,-12" fill="transparent" stroke-width="6" />
          </svg></span></a>

          {% set delta = user.getRepDelta() %}
          <a class="_header-icon p-r" id="repscreen-trigger" href="#!" title="Auszeichnungen: Du hast {% if delta == 0 %}keine{% else %}eine{%endif%} Änderung deiner Reputation">{% if delta > 0 %}<span class="_badge _badge-s-success p-a">+{{ num2suff(delta) }}</span>{% elif delta < 0 %}<span class="_badge _badge-s-success p-a">{{ num2suff(delta) }}</span>{% endif %}<span class="fs-base3"><i class="fa fa-trophy fs-heading" aria-hidden="true"></i></span></a>

          <a class="_header-icon hide__md hide__sm" title="Abmelden" href="/logout"><i class="fa fa-power-off fa-large fa-small"></i></a></li>
        {% else %}
          <a href="/login">anmelden</a>
        {% endif %}
      </nav>
    </div>
  </header>
  <div class="col-white bg--primary p3 bb2s bb--primary-dd" id="site-bar">
    <div class="grid single-fluid -full-center">
      <div class="column6__lg"><h2 class="m0 f-brand">&pi;-Learn</h2></div>
      <nav class="_nav _nav-h hide__sm hide__md _nav-right column6 col-white">
        <a href="/" class="-active bg--primary-d">Startseite</a>
        <a href="/f/0" class="-">Forum</a>
        <a href="/courses" class="-">Kurse</a>
      </nav>
    </div>
  </div>
  <nav class="side-nav hide" id="side-nav">
    <ul {% if user.may("forum_reviewEdits") or user.may("course_reviewEdits") %} class="is5" {% endif %}>
      <li><a href="/" class="has-icon" style="font-weight: bold;"><i class="fa fa-home fa-large fa-small" aria-hidden="true"></i> &pi;-Learn</a></li>
      <li{% if thispage == "index" %} class="active"{% endif %}><a href="/election">Startseite</a></li>
      <li{% if thispage == "history" %} class="active"{% endif %}><a href="/election/history">Überblick</a></li>
      <li{% if thispage == "elections" %} class="active"{% endif %}><a href="/election/list">Wahlen</a></li>
      {% if user.isDev() %}<li><a href="/election/editor"> Editor</a></li>{% endif %}
    </ul>
    {% if user.isLoggedIn() %}
    <div class="user">
        <i class="fa fa-user" aria-hidden="true"></i>
        <a href="/u/{{ user.id }}">{{ user.getHTMLName()|safe }}</a>
        <a href="/logout">Abmelden</a>
    </div>
    {% endif %}
  </nav>
<div id="notification-area" style="top:-1000px" class="_floatbox -no-round p-f p1"></div>
<div id="repscreen-area" style="top:-1000px" class="_floatbox -no-round p-f p1"></div>
 {% if global_notification != "" %}
    {% for subnote in global_notification.split("\n_____\n") %}
        <div class="_banner _banner-warning">
            <div class="single-fluid">
                {{ subnote }}
            </div>
        </div>
    {% endfor %}
  {% endif %}
    <div class="container single-fluid">
      {% if user.isDev() %}
      <div class="_nav _nav-h">
        <a {% if thispage == "elections" %} class="-active"{% endif %} href="/election/list">Wahlen</a>
        <a href="/election/editor">Editor</a>
      </div>
      {% endif %}
      <main class="p2">
        {% block body %}{% endblock %}
      </main>
    </div>
    <footer class="bg-dark-ddd col-white anchor-white mt3">
    <div class="single-fluid p5">
        <img alt="Creative Commons Lizenzvertrag" style="float: right; padding: 5px;" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png">
        <div class="copyright-notice">Alle Inhalte in Form von Texten und Bildern aus Kursen und Foren stehen unter der Creative-Commons-Lizenz <a href="https://creativecommons.org/licenses/by-sa/3.0/de/">CC-BY-SA</a> zur Verfügung. Alle anderen Inhalte sind urheberrechtlich geschützt und dürfen nur mit der expliziten Erlaubnis des Urhebers verwendet werden.</div>
        <strong>Wichtige Links:</strong>
        <div class="footer-links"><a href="/">Startseite</a><a href="/help/legal/impress">Impressum</a><a href="/help/legal/data-info">Datenschutz</a><a href="/help/legal/coc">Code of Conduct</a><a href="/election">Wahlen</a><a href="/helpdesk">Helpdesk</a></div>
        <hr>
        <div class="program-notice">&pi;-Learn Version <code>{{ __version__ }}</code></div>
        </div>
    </div>
    </footer>
    {% if not (user.isLoggedIn() or request.cookies.get("hide-hero-login-request", False)) %}
        <div class="_banner _banner--primary _banner-strong _banner-bottom _banner-with-decoration">
            <div class="single-fluid grid">
              <p class="column9 column12__sm">Willst du auch mitmachen und dein Wissen teilen?</p><div class="column3 column12__sm al-r"><a href="/login" class="_btn _btn--primary _btn-lighter">Registrieren</a><a href="#!" onclick="K=this;$post('hide-hero', {'hero':'login-request'}, function(){K.parentNode.style.display='none';})" class="_btn _btn--primary _btn-on-dark">&times;</a></div></div>
        </div>
    {% endif %}
    <script src="/static/js/stdlib.js"></script>
    <script>
        NOTIFICATIONS = {{ user_messages|tojson }};
    </script>
    <script src="/static/js/notifications.js"></script>
    <script src="/static/js/repscreen.js"></script>
</body>
</html>
